<div class="main-layout" [class.playing]="isPlaying()" [class.transitioning]="isTransitioning()">
  <aside class="sidebar" (click)="clearSelection()">
    <div class="sidebar-header">
      <div class="header-actions">
        <a routerLink="/newentry" class="icon-btn" title="Add Entry">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
        </a>
        <button class="icon-btn" title="View Entries">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
        </button>
        <button class="icon-btn" title="Search Entries">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
        </button>
      </div>
      <h2><a routerLink="/">Diary</a></h2>
    </div>
    <div class="sidebar-content">
      <entry-list />
    </div>
    <div class="sidebar-footer">
      <a routerLink="/newentry" class="new-entry-btn">+ New Entry</a>
    </div>
  </aside>

  <main class="content-area">
    @if (isPlaying()) {
      <entry-player [entries]="selectedDateEntries()" />
    } @else if (isRecording()) {
      <entry-recorder />
    } @else if (selectedDate(); as date) {
      <entry-view [date]="date" [entries]="selectedDateEntries()" (playClicked)="onPlay()" />
    } @else {
      <empty-state />
    }
  </main>
</div>
<div class="entry-list-container">
    @for (yearKv of (yearMap() | keyvalue: ascOrder); track yearKv.key) {
    <div class="year-group">
        <div class="year-header" (click)="toggleYear(yearKv.key, $event)" [class.expanded]="expandedYear() === yearKv.key">
            {{ yearKv.key }}
            <span class="chevron">â€º</span>
        </div>
        
        @if (expandedYear() === yearKv.key) {
        <div class="dates-container">
            @for (dateKv of (yearKv.value | keyvalue: ascOrder); track dateKv.key) {
            <div class="date-item" (click)="selectDate(dateKv.key, $event)"
                [style.background-color]="isSelected(dateKv.key) ? 'var(--layer-w-0)' : ''"
                [style.color]="isSelected(dateKv.key) ? 'var(--accent)' : ''">
                <span class="date-text" [style.color]="isSelected(dateKv.key) ? 'var(--accent)' : ''">{{ dateKv.key | date:'mediumDate' }}</span>
                <!-- A subtle indicator of multiple entries -->
                @if (dateKv.value.length > 1) {
                <span class="entry-count-badge">{{ dateKv.value.length }}</span>
                }
            </div>
            }
        </div>
        }
    </div>
    }
</div>